<head>
<script src="js/jquery-3.5.1.js"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="css/styles.css">
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<meta charset=”utf-8”>
<title>Wikibowl App</title>
</head>
<body>
<h2 id='title'></h2>
<p id='summary'></p>


<div class="container-fluid">
  <div class="row">
    <button class='col-sm-2 btn btn-primary' type="button" name="button" onclick="check()" id='btn'>Submit</button>
    <input class ='col-sm-10 form-control' name="name" rows="1.5" cols="25" id="in"></input>
  </div>
</div>



</body>
<script>

  var input = document.getElementById("in");
  input.addEventListener("keyup", function(event) {
  if (event.keyCode === 13) {
   event.preventDefault();
   document.getElementById("btn").click();
  }
  });

  function check() {
    document.getElementById('in').value = "";
    generateQ();

  }

  var acceptable = [
  'George_Washington',
  'John_Adams',
  'Thomas_Jefferson',
  'James_Madison',
  'John_Quincy_Adams',
  'Andrew_Jackson',
  'Martin_Van_Buren',
  'William_Henry_Harrison',
  'John_Tyler',
  'James_K_Polk',
  'Zachary_Taylor',
  'Millard_Fillmore',
  'Franklin_Pierce',
  'James_Buchanan',
  'Abraham_Lincoln',
  'Andrew_Johnson',
  'Ulysses_S_Grant',
  'Rutherford_B_Hayes',
  'James_A_Garfield',
  'Chester_A_Arthur',
  'Grover_Cleveland',
  'Benjamin_Harrison',
  'William_Mckinley',
  'Theodore_Roosevelt',
  'William_H_Taft',
  'Woodrow_Wilson',
  'Warren_G_Harding',
  'Calvin_Coolidge',
  'Herbert_Hoover',
  'Franklin_D_Roosevelt',
  'Harry_S_Truman',
  'Dwight_D_Eisenhower',
  'John_F_Kennedy',
  'Lyndon_B_Johnson',
  'Richard_M_Nixon',
  'Gerald_R_Ford',
  'Jimmy_Carter',
  'Ronald_Reagan',
  'George_Bush',
  'Bill_Clinton',
  'George_W_Bush',
  'Barack_Obama',
  'Donald_J_Trump',
  'One_Direction'
  ];

  generateQ();



//$.getJSON('https://en.wikipedia.org/api/rest_v1/page/random/title', function(data) {
//    var t = data['items'][0]['title'];
//    document.getElementById('title').innerHTML = t;


//    $.getJSON('https://en.wikipedia.org/api/rest_v1/page/summary/' + acceptable[1] + '?redirect=true', function(data1) {

//        document.getElementById('summary').innerHTML = data1['extract'];

//    });

//});

  function generateQ() {
    var index = Math.floor(Math.random() * acceptable.length);
    var page = acceptable[index];
    console.log(page);
    $.getJSON('https://en.wikipedia.org/api/rest_v1/page/summary/' + page + '?redirect=true', function(data1) {
        var firstName, lastName, name;
        name = page;
        var underscore = name.indexOf('_');
        firstName = name.substring(0, underscore);
        name = name.substring(underscore+1);
        underscore = name.indexOf('_');
        name = name.substring(underscore+1);
        if (name.indexOf('_') != -1) {
            lastName = name.substring(name.indexOf('_')+1);
        } else {
            lastName = name;
        }
        console.log(lastName);
        let reF = new RegExp(firstName, 'gi');
        let reL = new RegExp(lastName, 'gi');
        console.log(reF);
        var content = data1['extract'];
        content = content.replace(reF, '_'.repeat(firstName.length));
        content = content.replace(reL, '_'.repeat(lastName.length));

        //document.getElementById('title').innerHTML = page;
        document.getElementById('summary').innerHTML = content;

    });
  }



</script>
